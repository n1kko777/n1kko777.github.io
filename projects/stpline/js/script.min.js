window.addEventListener("DOMContentLoaded",function(){function e(e,t){let n=/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/,l=new Object;l.loading="Загрузка...",l.success="Спасибо! Скоро мы с вами свяжемся.",l.failure="Что-то пошло не так...",c.style.cssText="display: block; padding: 10px 0; position: absolute; bottom: 20%; font-size: 1rem; color: rgba(194, 142, 46, 0.753);",e.appendChild(c),e.querySelector('input[type="tel"]').addEventListener("blur",function(){n.test(this.value)?(this.style.borderColor="rgba(12, 12, 12, 0.596)",this.setAttribute("placeholder","Укажите Ваш номер телефона")):(this.value="",this.style.borderColor="rgba(194, 142, 46, 0.753)",this.setAttribute("placeholder","Неверный ввод данных"))}),e.addEventListener("submit",n=>{n.preventDefault(),e.appendChild(c);let r=new FormData(e),o=new XMLHttpRequest;o.open("POST","mail.php",!0),o.onreadystatechange=function(){o.readyState<4?c.innerHTML='<img src="img/ajax-loader.gif" style="width: 15px; height: 15px; margin-right: 5px;">'+l.loading:4===o.readyState&&(200==o.status&&o.status<300?c.innerHTML='<img src="img/checked.png" style="width: 15px; height: 15px; margin-right: 5px;">'+l.success:c.innerHTML='<img src="img/error.png" style="width: 15px; height: 15px; margin-right: 5px;">'+l.failure)},o.send(r);for(let e=0;e<t.length;e++)t[e].value=""})}function t(e){let t=document.documentElement,n=document.body;t.style.overflow="hidden",n.style.overflow="hidden",d[e].style.display="block";let l=0,r=setInterval(()=>{(l+=.05)>=1.05?clearInterval(r):d[e].style.opacity=""+l},1e3/60)}function n(e){let t=document.documentElement,n=document.body;t.style.overflow="",n.style.overflow="";let l=1,r=setInterval(()=>{(l-=.05)>=0?clearInterval(r):d[e].style.opacity=""+l},1e3/60);d[e].style.display="none"}let l=document.querySelectorAll(".contacts-form")[0],r=l.querySelectorAll("input[required]"),o=document.querySelectorAll(".contacts-form")[1],i=o.querySelectorAll("*[required]"),c=document.createElement("div");e(l,r),e(o,i);[].slice.call(document.querySelectorAll(".header-menu-item")).forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),function(e,t){var n=performance.now();requestAnimationFrame(function l(r){var o=r-n;o>t&&(o=t),e(o),o<t&&requestAnimationFrame(l)})}(function(t){let n=e.target,l=document.getElementById(n.getAttribute("href").slice(1));window.scrollBy(0,l.getBoundingClientRect().top/20)},1200)})});let s=[].slice.call(document.querySelectorAll(".materials-item")),a=[],d=document.querySelectorAll(".overlay"),u=document.querySelectorAll(".popup-content")[1],p=document.querySelectorAll(".popup-close"),y=document.querySelector(".popup-content-load");const m="https://spreadsheets.google.com/feeds/list/1vsCY045gQN5hSUmRaoy3piplzkasNtr2EwW4AMuol9k/od6/public/values?alt=json";d[1].addEventListener("click",e=>{(e.target.classList.contains("popup")||e.target.classList.contains("form-popup")||e.target.classList.contains("overlay"))&&n(1)}),s.forEach(e=>{a.push(e.querySelector(".materials-price").textContent),e.addEventListener("click",function(n){n.preventDefault();let l=n.target,r=s.indexOf(this);"A"!=l.tagName&&(t(1),u.children[1].textContent=e.children[1].textContent,u.children[2].src=e.children[0].src,u.children[3].textContent=e.children[2].textContent,u.children[4].textContent=e.children[3].textContent,function(e){let t=new XMLHttpRequest;t.open("GET",m,!0),t.onreadystatechange=(()=>{if(4===t.readyState)if(200==t.status&&t.status<300){y.style.display="none";let n=JSON.parse(t.responseText).feed.entry;u.children[1].textContent=n[e].gsx$title.$t,u.children[4].innerHTML=n[e].gsx$description.$t}else y.style.display="none",alert("Что-то пошло не так..."),window.location.reload()}),t.send()}(r))})}),p[1].addEventListener("click",()=>{n(1)});[].slice.call(document.querySelectorAll('a[href="#order"]')).forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),"hidden"==document.body.style.overflow&&n(1),t(0)})}),d[0].addEventListener("click",e=>{(e.target.classList.contains("popup")||e.target.classList.contains("overlay"))&&n(1)}),p[0].addEventListener("click",()=>{n(0)});document.querySelector(".rules span").addEventListener("click",()=>{t(2)}),d[2].addEventListener("click",e=>{(e.target.classList.contains("popup")||e.target.classList.contains("overlay"))&&n(2)}),p[2].addEventListener("click",()=>{n(2)})});